!function(angular){"use strict";function NcDarkroom(){return{restrict:"E",template:"<img />",scope:{image:"=",onCrop:"&",history:"=",crop:"=",rotate:"=",save:"=",minWidth:"=",minHeight:"=",maxWidth:"=",maxHeight:"=",rawDarkroom:"=?"},link:function(scope,element){function clear_darkroom(){darkroom&&(darkroom.selfDestroy(),clearing_darkroom=!0)}function load_new_image(){var imgElt=element.find("img");if(darkroom){if(imgElt.attr("data-used"))return clearing_darkroom||clear_darkroom(),setTimeout(load_new_image,.5),!1;clearing_darkroom=!1,imgElt[0].onload=null}imgElt.attr({crossOrigin:"anonymous",src:scope.image,"data-used":!0}),scope.rawDarkroom=darkroom=new Darkroom(imgElt[0],{minWidth:scope.minWidth||100,minHeight:scope.minHeight||100,maxWidth:scope.maxWidth||650,maxHeight:scope.maxHeight||500,plugins:{save:scope.save||!1,rotate:scope.rotate||!1,crop:scope.crop||!1,history:scope.history||!1},initialize:function(){var instance=this,cropPlugin=this.plugins.crop;cropPlugin.requireFocus(),instance.addEventListener("core:transformation",function(){scope.onCrop({image:instance.canvas.toDataURL()})})}})}var darkroom=scope.rawDarkroom=null,clearing_darkroom=!1;scope.$watch("image",function(new_value){new_value&&load_new_image()})}}}angular.module("angular-darkroom",[]).directive("ncDarkroom",NcDarkroom)}(angular);
//# sourceMappingURL=angular-darkroom.min.js.map