var AngularSound;!function(t){var e=function(){function t(t,e){this.name=t,this.buffer=e}return t}(),n=function(){function t(t,e,n){if(this.$http=e,this.$q=n,this.sounds=[],t.AudioContext)this.context=new t.AudioContext;else{if(!t.webkitAudioContext)throw"browser does not support the web audio api";this.context=new t.webkitAudioContext}}return t.$inject=["$window","$http","$q"],t.prototype.loadSound=function(t){var n=this,o=this.$q.defer();return this.$http.get(t.src,{responseType:"arraybuffer"}).then(function(u){n.context.decodeAudioData(u.data,function(u){if(u.duration>50)throw t.name+" is too long, this module is designed to handle sounds less than 50s long";var r=new e(t.name,u);n.sounds.push(r),o.resolve(n.getBufferSource(r))})},function(t){throw t}),o.promise},t.prototype.getSound=function(t){for(var e in this.sounds)if(this.sounds[e].name===t)return this.getBufferSource(this.sounds[e]);throw'no loaded sound called "'+t+'"'},t.prototype.getBufferSource=function(t){var e;return e=this.context.createBufferSource(),e.buffer=t.buffer,e.connect(this.context.destination),e},t}();t.SoundService=n}(AngularSound||(AngularSound={})),angular.module("mcwebb.sound",[]).service("SoundService",AngularSound.SoundService);